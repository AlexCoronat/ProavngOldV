<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:loadBundle basename="resources.messages" var="msg"></f:loadBundle>


<h:head>
	<script src="https://kit.fontawesome.com/b2bf6f31bc.js" crossorigin="anonymous"></script>
	<style>
		html{
			
		}
		.over {
		   font-family: Verdana,Arial,sans-serif;
		}
		h5{
			margin-top: 5px;
			margin-bottom: 5px; 
		}
		th span{
			display: inline-block;
		}
		.ui-sortable-column-icon.ui-icon-carat-2-n-s{
			width:22px;
			height:24px;
			background-image: url('sortIcono.png');
			background-size:contain;
			background-repeat:no-repeat;
			background-position:center;
		}
		body .ui-datatable thead th .ui-sortable-column-icon.ui-icon-triangle-1-n{
			width:16px;
			height:16px;
			background-image: url('sortAsc.png');
			background-size:contain;
			background-repeat:no-repeat;
			background-position:center;
		}
		body .ui-datatable thead th .ui-sortable-column-icon.ui-icon-triangle-1-s{
			width:16px;
			height:16px;
			background-image: url('sortDes.png');
			background-size:contain;
			background-repeat:no-repeat;
			background-position:center;
		}
	</style>
	<script type="text/javascript">
		function validar(valor,filter) {
			var valor = parseInt(PF('valida').getJQ().val());
			if(isNAN(valor)){
				alert('NO ES UN VALOR NUMERICO!!')}
			return null;
		}
	</script>
</h:head>
<h:body>
	<h:form>
		<h:commandButton value="Generar Listado"
			action="#{cargador.cargarListado()}" />
		<br />
	</h:form>
	<h:form id="formLista">
		
		<br />
		<p:dataTable id="tbl" var="visitante" value="#{cargador.visitantes}"
			paginator="true" rows="10" rowsPerPageTemplate="5,10,15"
			paginatorPosition="bottom" resizableColumns="true" editable="true"
			class="over" 
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
 			 {PreviousPageLink} {PageLinks} {NextPageLink} 
 			 {LastPageLink} {RowsPerPageDropdown}">
			<p:column id="filtro" headerText="" sortBy="#{visitante.nombre}"  filterBy="#{visitante.nombre}">
				<f:facet name="header">
					<h5>Nombre</h5>
				</f:facet>
				<p:cellEditor id="clledt">
					<f:facet name="output">
						<h:outputText value="#{visitante.nombre}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText required="true" value="#{visitante.nombre}">
						</p:inputText>
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column sortBy="#{visitante.apellido}" filterBy="#{visitante.apellido}">
				<f:facet name="header">
					<h5>Apellido</h5>
				</f:facet>
				<h:outputText value="#{visitante.apellido}" />
			</p:column>

			<p:column sortBy="#{visitante.edad}" filterBy="#{visitante.edad}" 
					  filterOptions="true" filterFunction="FilterValidation">
				<f:facet name="header">
					<h5>Edad</h5>
				</f:facet>
				<h:outputText value="#{visitante.edad}" />
			</p:column>

			<p:column sortBy="#{visitante.pais}" filterBy="#{visitante.pais}" class="boxContent" >
				<f:facet name="header">
					<h5>Pa√≠s</h5>
				</f:facet>
				<h:outputText value="#{visitante.pais}" />
			</p:column>

			<p:column style="width:50px" exportable="false">
				<f:facet name="header">
					<h5>Editar</h5>
				</f:facet>
				<p:rowEditor />
			</p:column>
		</p:dataTable>

		<br />

		<p:commandButton value="xSubmit" styleClass="mr-2 mb-2" ajax="false">
			<p:dataExporter type="xls" target="tbl" fileName="visitantes"
				postProcessor="#{customizedDocumentsView.postProcessXLS}"></p:dataExporter>
		</p:commandButton>

		<h:commandLink value="Exportar">
			<p:dataExporter type="xls" target="tbl" fileName="visitantes"
				postProcessor="#{customizedDocumentsView.postProcessXLS}" />
		</h:commandLink>
		<p:commandButton value="Exportar excel"
			action="#{customizedDocumentsView.Exporta()}" styleClass="mr-2 mb-2"
			ajax="false">

		</p:commandButton>
		<p:dialog></p:dialog>
	</h:form>
</h:body>
</html>